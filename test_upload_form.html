<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Upload Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2>üß™ Test Form Upload Berita</h2>
        <p class="text-muted">Halaman ini untuk test form upload tanpa perlu login admin</p>
        
        <div class="alert alert-info">
            <strong>Catatan:</strong> Ini hanya untuk testing. Di admin panel yang sebenarnya, 
            Anda harus login terlebih dahulu.
        </div>

        <div class="card shadow-sm">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-plus"></i> Tambah Berita Baru</h5>
            </div>
            <div class="card-body">
                <form action="add_news.php" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="title" class="form-label">Judul Berita *</label>
                        <input type="text" id="title" name="title" class="form-control" 
                               placeholder="Masukkan judul berita" required>
                        <small class="text-muted">Wajib diisi</small>
                    </div>
                    
                    <div class="mb-3">
                        <label for="content" class="form-label">Isi Berita *</label>
                        <textarea id="content" name="content" class="form-control" rows="8" 
                                  placeholder="Masukkan isi berita" required></textarea>
                        <small class="text-muted">Wajib diisi</small>
                    </div>
                    
                    <div class="mb-3">
                        <label for="image" class="form-label">Gambar Berita</label>
                        <input type="file" id="image" name="image" class="form-control" 
                               accept="image/*" onchange="previewImage(event)">
                        <small class="text-muted">Opsional. Format: JPG, PNG, GIF. Max: 5MB</small>
                        
                        <div id="imagePreview" class="mt-3" style="display: none;">
                            <p class="fw-bold">Preview:</p>
                            <img id="preview" src="" alt="Preview" style="max-width: 300px; max-height: 300px;" 
                                 class="img-thumbnail">
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-success btn-lg">
                        <i class="fas fa-save"></i> Simpan Berita
                    </button>
                    <a href="admin.php" class="btn btn-secondary btn-lg">
                        <i class="fas fa-arrow-left"></i> Kembali ke Admin
                    </a>
                </form>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">üìã Checklist</h5>
            </div>
            <div class="card-body">
                <ul class="list-group">
                    <li class="list-group-item">
                        <input type="checkbox" id="check1"> 
                        <label for="check1">Judul sudah diisi</label>
                    </li>
                    <li class="list-group-item">
                        <input type="checkbox" id="check2"> 
                        <label for="check2">Konten sudah diisi</label>
                    </li>
                    <li class="list-group-item">
                        <input type="checkbox" id="check3"> 
                        <label for="check3">Gambar sudah dipilih (opsional)</label>
                    </li>
                    <li class="list-group-item">
                        <input type="checkbox" id="check4"> 
                        <label for="check4">Ukuran gambar tidak lebih dari 5MB</label>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function previewImage(event) {
            const file = event.target.files[0];
            if (file) {
                // Check file size
                const fileSizeMB = file.size / (1024 * 1024);
                if (fileSizeMB > 5) {
                    alert('‚ùå Ukuran file terlalu besar! Maksimal 5MB. File Anda: ' + fileSizeMB.toFixed(2) + 'MB');
                    event.target.value = '';
                    document.getElementById('imagePreview').style.display = 'none';
                    return;
                }
                
                // Check file type
                const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
                if (!allowedTypes.includes(file.type)) {
                    alert('‚ùå Tipe file tidak diperbolehkan! Hanya JPG, PNG, dan GIF.');
                    event.target.value = '';
                    document.getElementById('imagePreview').style.display = 'none';
                    return;
                }
                
                // Preview image
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('preview').src = e.target.result;
                    document.getElementById('imagePreview').style.display = 'block';
                    document.getElementById('check3').checked = true;
                    document.getElementById('check4').checked = fileSizeMB <= 5;
                };
                reader.readAsDataURL(file);
            }
        }

        // Auto-check when fields are filled
        document.getElementById('title').addEventListener('input', function() {
            document.getElementById('check1').checked = this.value.length > 0;
        });

        document.getElementById('content').addEventListener('input', function() {
            document.getElementById('check2').checked = this.value.length > 0;
        });
    </script>
</body>
</html>
