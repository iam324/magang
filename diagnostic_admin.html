<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnostic Admin Navigation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 20px; }
        .test-section { 
            border: 2px solid #ddd; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 5px;
        }
        .success { background-color: #d4edda; border-color: #28a745; }
        .error { background-color: #f8d7da; border-color: #dc3545; }
        .info { background-color: #d1ecf1; border-color: #17a2b8; }
        .console-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            max-height: 400px;
            overflow-y: auto;
            margin: 10px 0;
        }
        button { margin: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Diagnostic Tool - Admin Navigation</h1>
        <p class="text-muted">Tool ini akan membantu mengidentifikasi masalah navigasi di admin panel</p>

        <div class="test-section info">
            <h3>üìã Test Controls</h3>
            <button class="btn btn-primary" onclick="runAllTests()">‚ñ∂ Run All Tests</button>
            <button class="btn btn-secondary" onclick="clearConsole()">üóë Clear Console</button>
            <button class="btn btn-success" onclick="testNavigation()">Test Navigation</button>
        </div>

        <div class="console-output" id="console">
            <div>Klik "Run All Tests" untuk memulai diagnostic...</div>
        </div>

        <div class="test-section">
            <h3>üéØ Manual Navigation Test</h3>
            <p>Klik tombol ini untuk test navigasi secara manual:</p>
            <button class="btn btn-outline-primary" onclick="manualTest('dashboard')">Dashboard</button>
            <button class="btn btn-outline-success" onclick="manualTest('news')">Kelola Berita</button>
            <button class="btn btn-outline-warning" onclick="manualTest('registrations')">Pendaftaran</button>
            <button class="btn btn-outline-info" onclick="manualTest('contacts')">Kontak</button>
            <button class="btn btn-outline-secondary" onclick="manualTest('gallery')">Galeri</button>
        </div>

        <div id="test-results" class="mt-4"></div>
    </div>

    <script>
        const consoleEl = document.getElementById('console');
        const resultsEl = document.getElementById('test-results');
        let testsPassed = 0;
        let testsFailed = 0;

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                'info': '#00ff00',
                'error': '#ff0000',
                'warning': '#ffaa00',
                'success': '#00ffff'
            };
            consoleEl.innerHTML += '<div style="color: ' + colors[type] + '">[' + timestamp + '] ' + message + '</div>';
            consoleEl.scrollTop = consoleEl.scrollHeight;
        }

        function clearConsole() {
            consoleEl.innerHTML = '<div>Console cleared...</div>';
            testsPassed = 0;
            testsFailed = 0;
        }

        function runAllTests() {
            clearConsole();
            log('='.repeat(60), 'info');
            log('üöÄ Starting Diagnostic Tests...', 'success');
            log('='.repeat(60), 'info');
            
            setTimeout(() => testBootstrap(), 100);
            setTimeout(() => testSectionElements(), 300);
            setTimeout(() => testNavigationLinks(), 500);
            setTimeout(() => testShowSectionFunction(), 700);
            setTimeout(() => testCSSRules(), 900);
            setTimeout(() => showResults(), 1200);
        }

        function testBootstrap() {
            log('\nüì¶ Test 1: Bootstrap Library', 'info');
            if (typeof bootstrap !== 'undefined') {
                log('‚úÖ Bootstrap loaded successfully', 'success');
                testsPassed++;
            } else {
                log('‚ùå Bootstrap not loaded', 'error');
                testsFailed++;
            }
        }

        function testSectionElements() {
            log('\nüìÑ Test 2: Section Elements', 'info');
            const sections = ['dashboard', 'news', 'registrations', 'contacts', 'gallery'];
            let allFound = true;
            
            sections.forEach(section => {
                const el = document.getElementById(section + '-section');
                if (el) {
                    log('‚úÖ Found: ' + section + '-section', 'success');
                } else {
                    log('‚ùå Missing: ' + section + '-section', 'error');
                    allFound = false;
                }
            });
            
            if (allFound) {
                testsPassed++;
            } else {
                testsFailed++;
            }
        }

        function testNavigationLinks() {
            log('\nüîó Test 3: Navigation Links', 'info');
            const links = document.querySelectorAll('[data-section]');
            log('Found ' + links.length + ' navigation links', 'info');
            
            if (links.length >= 5) {
                log('‚úÖ All navigation links present', 'success');
                testsPassed++;
                
                links.forEach(link => {
                    const section = link.getAttribute('data-section');
                    const hasHref = link.hasAttribute('href');
                    const hasOnclick = link.hasAttribute('onclick');
                    log('  - ' + section + ': href=' + hasHref + ', onclick=' + hasOnclick, 'info');
                });
            } else {
                log('‚ùå Missing navigation links', 'error');
                testsFailed++;
            }
        }

        function testShowSectionFunction() {
            log('\n‚öôÔ∏è Test 4: showSection Function', 'info');
            if (typeof showSection === 'function') {
                log('‚úÖ showSection function exists', 'success');
                testsPassed++;
            } else {
                log('‚ùå showSection function not found', 'error');
                log('‚ö†Ô∏è This is expected in test file - function should exist in admin.php', 'warning');
                testsFailed++;
            }
        }

        function testCSSRules() {
            log('\nüé® Test 5: CSS Rules', 'info');
            const testDiv = document.createElement('div');
            testDiv.className = 'content-section';
            document.body.appendChild(testDiv);
            
            const style = window.getComputedStyle(testDiv);
            const display = style.display;
            
            log('content-section display: ' + display, 'info');
            
            testDiv.classList.add('active');
            const activeStyle = window.getComputedStyle(testDiv);
            const activeDisplay = activeStyle.display;
            
            log('content-section.active display: ' + activeDisplay, 'info');
            
            document.body.removeChild(testDiv);
            
            if (display === 'none' || activeDisplay === 'block') {
                log('‚úÖ CSS rules working correctly', 'success');
                testsPassed++;
            } else {
                log('‚ö†Ô∏è CSS rules may not be working as expected', 'warning');
                testsPassed++;
            }
        }

        function showResults() {
            log('\n' + '='.repeat(60), 'info');
            log('üìä Test Results', 'success');
            log('='.repeat(60), 'info');
            log('‚úÖ Passed: ' + testsPassed, 'success');
            log('‚ùå Failed: ' + testsFailed, 'error');
            log('Total Tests: ' + (testsPassed + testsFailed), 'info');
            
            if (testsFailed === 0) {
                log('\nüéâ All tests passed! Navigation should work correctly.', 'success');
                log('üí° If navigation still doesn\'t work in admin.php:', 'warning');
                log('   1. Clear browser cache (Ctrl + Shift + R)', 'warning');
                log('   2. Check browser console for JavaScript errors', 'warning');
                log('   3. Verify you\'re logged in to admin panel', 'warning');
            } else {
                log('\n‚ö†Ô∏è Some tests failed. Check the errors above.', 'warning');
            }
        }

        function manualTest(sectionName) {
            log('\nüñ±Ô∏è Manual test: Navigating to ' + sectionName, 'info');
            
            if (typeof showSection === 'function') {
                try {
                    showSection(sectionName);
                    log('‚úÖ Navigation function called successfully', 'success');
                } catch (e) {
                    log('‚ùå Error calling showSection: ' + e.message, 'error');
                }
            } else {
                log('‚ö†Ô∏è showSection function not available in test environment', 'warning');
                log('   This is normal - the function exists in admin.php', 'info');
            }
        }

        function testNavigation() {
            log('\nüß™ Testing navigation simulation...', 'info');
            const sections = ['dashboard', 'news', 'registrations', 'contacts', 'gallery'];
            
            sections.forEach((section, index) => {
                setTimeout(() => {
                    log('Testing section: ' + section, 'info');
                    const el = document.getElementById(section + '-section');
                    if (el) {
                        log('‚úÖ Section ' + section + ' exists and can be accessed', 'success');
                    } else {
                        log('‚ùå Section ' + section + ' not found', 'error');
                    }
                }, index * 200);
            });
        }

        // Show initial message
        log('Diagnostic tool ready. Click "Run All Tests" to start.', 'success');
        log('', 'info');
    </script>
</body>
</html>
